# sinatra版コードランナーに関する方針

## コーディング規則

参考:[shugo.net](https://shugo.net/ruby-codeconv/codeconv.html), [cookpad](https://github.com/cookpad/styleguide/blob/master/ruby.ja.md)    

**※要相談**

## 機能分類

/public/run.js, /public/ui.jsは特に変更点なし  

対象: **app.rb**の**post '/api/run'**メソッドの処理部分

目的: 複数回の実行に対応できるように、クラス定義

- app.rb 機能確認
    - ルーティングの設定
    - 呼び出し後の処理を定義

### post　　　/api/run

- 入力値の取得 → **入力値管理クラス**
    - 入力フォーム値の取得
    - コンテナに渡すファイルの作成
        - ソースファイル
        - 入力ファイル

- コンテナ管理 → **コンテナ実行クラス**
    - コンテナの作成
    - コンテナの実行
    - コンテナから結果の取得
    - コンテナの停止
    - コンテナの削除
    - コンテナで作られたファイルから実行時間を取得
    - 返却用のjsonデータ作成
    - 作業ディレクトリ管理 → **ディレクトリ管理クラス**
        - ローカルに作業ディレクトリを作成
        - ローカルの作業ディレクトリの削除

- 結果を返却